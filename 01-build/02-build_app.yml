steps:

  - script: |
      npm install
    displayName: 'npm install'

  - script: |
      npm run build
    displayName: 'npm build'

  - task: CopyFiles@2
    inputs:
        sourceFolder: '$(Build.SourcesDirectory)'
        contents: ./*
        targetFolder: '$(Build.ArtifactStagingDirectory)'
    displayName: 'Copy project files'

  - task: PublishPipelineArtifact@1
    inputs:
        artifactName: nodejsapp
        targetPath: '$(Build.ArtifactStagingDirectory)'
        publishLocation: 'pipeline'
    displayName: 'Publish npm artifact'